dist: trusty
sudo: required
language: node_js
node_js:
- '7'

addons:
  apt:
    sources:
     - google-chrome
    packages:
     - google-chrome-stable fluxbox

cache:
  yarn: true
  directories:
  - node_modules
  - functions/node_modules

before_script:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3
  - fluxbox >/dev/null 2>&1 &
  - "yarn run predeploy"

before_deploy:
- "( cd functions ; yarn install )"

deploy:
  provider: firebase
  skip_cleanup: true
  token:
    secure: "dPrwE/jvWrsFHxwc0ooQUHPuw6nLMpMDJUdOV1t+RR3qSjngNsS51DGGo0qqhpwnsYzoy75fGs4fFzPXNdVfYj1D2W5HFPPkXrHi7HaeLDmhaCpvCiEIHOUaRcp1FaAkutepa8JwgMhL37z5quQtp8qLA9qT3Lo8vBKF7taRvb7z3JV8n30XY6vvTxQqVcbYc99jH0QWxuHkxqxOkplKAppRLAtsYYLCs9srhzTX2/PsadXD41RNwH+zM2o5z4thRiYtBtcPf/t0kv+yrtFYGH5tax4aU513shfcXGwVw2T0Lr5Nb/mk24zlAWppCkTvStUncGF6myYAssc8bm60mLw7+4FqpyHRODhCHkqSbd9yP2HQo+xn47nLteq2q8FAb+4WZkN2Yq5Spa5dWVrCkQpvyPF8ADAV7HE1YoIYdYpslRGKs1DKJ3U6MwIAic/bld7TCTr9zh8zl1VDAqUl2Mo3x8fczEV1KcSCkJxhTfFKlYct1NJ59c9+8ICbmqrfV8jpGHC8w0acTTgwLI24L5a2Nyh6sgxC7EzeYMrPvVeTyuO7e0pVQEeYXHY/K6IXT2FOHhq04QsPqJRxd+bxHhczq5KRBJvl/HQ+/Dqh+B8IbFNgq3GoQgMERR3AwqEq1rAWTTL++JU+x6s5j80hnkbzsir1aV0ZqbSkDHKEmuY="
